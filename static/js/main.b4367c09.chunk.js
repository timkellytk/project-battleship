(this["webpackJsonpproject-battleship"]=this["webpackJsonpproject-battleship"]||[]).push([[0],{100:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAC20lEQVRoge2XX0hTURzHv2etLScaSJvrJdIiSQtMRmUpgRBSLwpBRT2IpAyKSNAkCIwIH4qKRVEGPpuIgyTMl/7aFqWWq9sfTaiHhFpLJTXXdds9PUiwe3f/7brZhvfzds73d+75/jjnd865gI6Ojo7OcoZICXcfeb0AdkkM8lRV7C5Pmqs4MMhoouYBgAJlSfCiCbkEAADNTY1obmoU9NKOJPmJG8UExKiuKDuaaCNaMSoFXLp8RVanbaC8jsf5/IAba/ntD0O8JtnDStahGjStQCqhsQZSh7RfgUXXADab+e0Dgj3v9vLbwhrBZyULssQU0N4jdVQsMJpDU76Sur6hYQCgT838+EIHP1ghgfZZq6Nr9VZ+ZUtQyPoD19z3bNF9mraQ35zdqmWcGD+MFlXfMlIOhX/8tTH9Wib1ZKzf11pdcT+XnT4LMFo+gQmY8YDY4bHkVaqJd7Djb5y9A73Cfk1baKnJ5FhaFWIKat2+MaGmaQWWmp3Br+7anljzgEgCPfbZdTCaToRtm05Fsm2rkm9PnhUzATZr1F9zRkKXvMZ/HavMMeQXj4StG6xJ8qYK08iTlsyrHRekdNl3CN2BbJjwHEBRwp2pgaCP9GO/XIjsMUpeYhoUNQC4hBpTRxgRnFYKUrwHiAevANxJiKX4uEW8eK8UpO4iI7gIYCmP1ymYcF5NoKoESD8YAC8WZSk+zpGHmFATKJuAa3De6RqcdwIAKDqFOlNaD6a0XnK8Rv0j5tAWM78EMafQ7SFq+U1DWwwcbQDB4X/mN77t7q7srHcDwE97EXzlJzG67SAAoGC4C8XPrmPN94Utuxg9aLFVt7d8+iacnzMQVyZZ+c7pIHOyCbgG2JR7SkTTsN3M85z2PzSyCTCBCJhAJGV1QOQtFOKAySCH134OY5ML99f4DEVJrgE5GQv5/m89mpgayLs5k9I18OV41jKqgXQg7RPQ0dHR0dFJa/4CSikt5gwrqsUAAAAASUVORK5CYII="},133:function(e,t,n){e.exports=n(196)},138:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(8),i=n.n(o),c=(n(138),n(36)),l=n(23),u=n(130),s=n(209),m=n(210),h=n(203),p=n(204),g=n(207),f=n(211),d=n(212),b=n(24),v=n(100),S=n.n(v),w=n(206),E=n(201),y="SHIP";function O(){var e=Object(l.a)(["\n  position: ",";\n  cursor: pointer;\n  z-index: 100;\n  left: 0%;\n  top: 0%;\n  right: 0%;\n  bottom: 0%;\n  width: ",";\n  height: ",";\n  border: 1px solid hsla(224, 100%, 63.84%, 1);\n  background-color: ",";\n"]);return O=function(){return e},e}var j=b.a.div(O(),[function(e){return e.showcase?"relative":"absolute"}],(function(e){return e.orientation?.95*e.length*34+"px":"34px"}),(function(e){return e.orientation?"34px":.95*e.length*34+"px"}),(function(e){return e.sunk?"#db4c3f":"hsla(228, 100%, 66.74%, 0.22)"})),k=function(e){var t=Object(w.a)({item:{type:y,index:e.shipIndex},collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(c.a)(t,3),r=n[0].isDragging,o=n[1],i=n[2];return a.a.createElement(a.a.Fragment,null,a.a.createElement(E.a,{connect:i,src:S.a}),a.a.createElement(j,Object.assign({},e,{onClick:e.toggleShip,ref:o,isDragging:r})))},A=h.a.Title,C=function(e){var t=e.ships.map((function(e){return a.a.createElement(k,{length:e.length,sunk:e.isSunk(),showcase:!0})}));return a.a.createElement("div",null,a.a.createElement(A,{level:5},"Enemy Ships"),a.a.createElement(m.b,null,t))},G=h.a.Title,M=function(e){var t=a.a.createElement(m.b,null,a.a.createElement(p.a,{type:"primary",size:"large",onClick:e.setStartGame},"Play Game"),a.a.createElement(p.a,{type:"ghost",size:"large",onClick:e.randomiseShips},"Randomise Ships")),n=a.a.createElement(p.a,{type:"primary",size:"large",onClick:function(){return e.playAgain()}},"Restart"),r=a.a.createElement(m.b,null,a.a.createElement(f.a,{style:{fontSize:"1.6em",marginBottom:"6px"}}),a.a.createElement(G,{level:5},"You win!")),o=a.a.createElement(m.b,null,a.a.createElement(d.a,{style:{fontSize:"1.6em",marginBottom:"6px"}}),a.a.createElement(G,{level:5},"You lost"));return a.a.createElement(g.a,{justify:"center"},a.a.createElement(m.b,{direction:"vertical",size:"large",align:"center"},a.a.createElement(G,{level:1},"Battleship"),"player"===e.winner?r:null,"computer"===e.winner?o:null,e.startGame?a.a.createElement(C,{ships:e.ships}):null,e.startGame?n:t))};function D(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 12px;\n"]);return D=function(){return e},e}function x(){var e=Object(l.a)(["\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-column: 2;\n"]);return x=function(){return e},e}function I(){var e=Object(l.a)(["\n  display: grid;\n  grid-template-rows: repeat(10, 1fr);\n  grid-column: 1;\n  grid-row: 2;\n"]);return I=function(){return e},e}function T(){var e=Object(l.a)(["\n  display: grid;\n  width: ","px;\n  grid-template: ","px 1fr / ","px 1fr;\n  opacity: ",";\n"]);return T=function(){return e},e}var z=b.a.div(T(),340,34,34,(function(e){return e.startGame?"100%":"50%"})),K=b.a.div(I()),U=b.a.div(x()),H=b.a.div(D()),R=function(e){return a.a.createElement(z,{startGame:e.startGame},a.a.createElement(U,null,a.a.createElement(H,null,"A"),a.a.createElement(H,null,"B"),a.a.createElement(H,null,"C"),a.a.createElement(H,null,"D"),a.a.createElement(H,null,"E"),a.a.createElement(H,null,"F"),a.a.createElement(H,null,"G"),a.a.createElement(H,null,"H"),a.a.createElement(H,null,"I"),a.a.createElement(H,null,"J")),a.a.createElement(K,null,a.a.createElement(H,null,"1"),a.a.createElement(H,null,"2"),a.a.createElement(H,null,"3"),a.a.createElement(H,null,"4"),a.a.createElement(H,null,"5"),a.a.createElement(H,null,"6"),a.a.createElement(H,null,"7"),a.a.createElement(H,null,"8"),a.a.createElement(H,null,"9"),a.a.createElement(H,null,"10")),e.children)},J=n(208);function N(){var e=Object(l.a)(["\n  margin-bottom: 0.6em;\n"]);return N=function(){return e},e}function Q(){var e=Object(l.a)(["\n  font-size: ","px;\n  line-height: 0px;\n  color: indianred;\n  cursor: default;\n  background-color: ",";\n"]);return Q=function(){return e},e}function X(){var e=Object(l.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: ","px;\n  width: ","px;\n  background-color: ",";\n  :hover {\n    border: ",";\n    background-color: ",";\n    cursor: ",";\n  }\n"]);return X=function(){return e},e}var F=b.a.div(X(),32,32,(function(e){return e.canDrop&&e.isOver?"rgba(340, 100, 51, 0.6)":e.canDrop?"rgba(51, 170, 51, 0.2)":"black"}),(function(e){return e.startGame&&e.computer?"2px solid green;":null}),(function(e){return e.startGame&&e.computer?"rgba(51, 170, 51, 0.2)":null}),(function(e){return e.startGame&&e.computer?"pointer":null})),q=Object(b.a)(F)(Q(),34,(function(e){return e.sunk?"indianred":"rgb(211, 211, 211, 0.02)"})),B=b.a.div(N()),P=function(e){var t=Object(J.a)({accept:y,canDrop:function(t){return Ae(e.row,e.col,t.index)},drop:function(t){return e.moveShip(e.row,e.col,t.index)},collect:function(e){return{isOver:!!e.isOver(),canDrop:!!e.canDrop()}}}),n=Object(c.a)(t,2),r=n[0],o=r.isOver,i=r.canDrop,l=n[1],u=a.a.createElement(F,{ref:l,canDrop:i,isOver:o,computer:e.computer,onClick:e.clicked,startGame:e.startGame},e.children);return"MISS"===e.hit&&(u=a.a.createElement(q,null,a.a.createElement(B,null,".",e.children))),"HIT"===e.hit&&(u=a.a.createElement(q,null,"X",e.children)),"SUNK"===e.hit&&(u=a.a.createElement(q,{sunk:!0},e.children)),u},Y=n(205);function Z(){var e=Object(l.a)(["\n  position: relative;\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  grid-gap: 1px;\n  background-color: ",";\n  border: 1px solid ",";\n"]);return Z=function(){return e},e}var V=b.a.div(Z(),"#303030","#303030"),W=function(e){var t=e.gameboard.map((function(t,n){return t.map((function(t,r){var o,i,c=a.a.createElement(P,{row:n,col:r,hit:t,key:Object(Y.a)(),computer:e.computer,startGame:e.startGame,moveShip:e.moveShip,canMoveShip:e.canMoveShip,clicked:function(){return e.computer&&!1===e.winner?e.handleClick(n,r):e.startGame?null:e.moveShip(n,r)}}),l=!1;return e.ships&&(l=e.ships.find((function(e){return e.startCoordinate.row===n&&e.startCoordinate.col===r})))&&(o=e.ships.findIndex((function(e){return e.startCoordinate.row===n&&e.startCoordinate.col===r})),i=a.a.createElement(P,{key:Object(Y.a)(),row:n,col:r,moveShip:e.moveShip,canMoveShip:e.canMoveShip,hit:t,startGame:e.startGame},a.a.createElement(k,{orientation:l.orientation,length:l.length,coordinates:l.getCoordinates(),shipIndex:o,toggleShip:function(){return e.toggleShip(o)},startGame:e.startGame}))),l?i:c}))}));return a.a.createElement(V,null,t)},L=function(e){return a.a.createElement(g.a,{justify:"center"},a.a.createElement(m.b,{size:50,align:"center"},a.a.createElement(R,{startGame:!0},a.a.createElement(W,{gameboard:e.player,ships:e.ships,moveShip:e.moveShip,toggleShip:e.toggleShip,canMoveShip:e.canMoveShip,startGame:e.startGame})),a.a.createElement(R,{startGame:e.startGame},a.a.createElement(W,{gameboard:e.computer,handleClick:e.attackComputer,startGame:e.startGame,winner:e.winner,computer:!0}))))},$=h.a.Paragraph,_=s.a.Footer,ee=function(){return a.a.createElement(_,{style:{textAlign:"center"}},a.a.createElement($,null,"Created by"," ",a.a.createElement("a",{href:"https://github.com/timkellytk",target:"_blank",rel:"noopener noreferrer"},"Tim Kelly")," ","for The Odin Project"))},te=n(43),ne=n(44),re=n(46),ae=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object(te.a)(this,e),this.length=r,this.hitCount=0,this.startCoordinate={row:t,col:n},this.orientation=a}return Object(ne.a)(e,[{key:"toggleOrientation",value:function(){this.orientation=!this.orientation}},{key:"getCoordinates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startCoordinate,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.orientation,n=e.row,r=e.col,a=Object(re.a)(Array(this.length));return a.map((function(e,a){return t?{row:n,col:r+a}:{row:n+a,col:r}}))}},{key:"hit",value:function(){this.hitCount+=1}},{key:"isSunk",value:function(){return this.length===this.hitCount}}]),e}(),oe=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},ie=function(e,t){return e>=0&&e<=9&&t>=0&&t<=9},ce=function(e){return e.every((function(e){var t=e.row,n=e.col;return t>=0&&t<=9&&n>=0&&n<=9}))},le=function(e,t){return e.every((function(e){return!t.some((function(t){return t.getCoordinates().some((function(t){return se(e,t)}))}))}))},ue=function(e){var t=e.row,n=e.col;return[{row:t-1,col:n-1},{row:t-1,col:n},{row:t-1,col:n+1},{row:t,col:n-1},{row:t,col:n},{row:t,col:n+1},{row:t+1,col:n-1},{row:t+1,col:n},{row:t+1,col:n+1}]},se=function(e,t){return ue(e).some((function(e){var n=e.row,r=e.col;return n===t.row&&r===t.col}))},me=function(e,t){return e.filter((function(e,n){return n!==t}))},he=function(){function e(){Object(te.a)(this,e),this.board=Object(re.a)(Array(10)).map((function(e){return Object(re.a)(Array(10)).map((function(e){return""}))})),this.ships=[]}return Object(ne.a)(e,[{key:"getGameboard",value:function(){return this.board}},{key:"getShips",value:function(){return this.ships}},{key:"placeShip",value:function(e){var t=e.getCoordinates();return!(!ce(t)||!le(t,this.ships))&&(this.ships.push(e),!0)}},{key:"intialiseShips",value:function(){var e=this;[{quantity:4,size:1},{quantity:3,size:2},{quantity:2,size:3},{quantity:1,size:4}].forEach((function(t){for(var n=t.quantity,r=t.size,a=0;a<n;){var o=new ae(oe(0,9),oe(0,9),r,Math.random()>=.5);e.placeShip(o)&&(a+=1)}}))}},{key:"randomiseShips",value:function(){this.ships=[],this.intialiseShips()}},{key:"moveShip",value:function(e,t,n){var r=this.ships[n],a={row:e,col:t},o=r.getCoordinates(a),i=me(this.ships,n);return!(!ce(o)||!le(o,i))&&(r.startCoordinate=a,!0)}},{key:"canMoveShip",value:function(e,t,n){var r={row:e,col:t},a=this.ships[n].getCoordinates(r),o=me(this.ships,n);return!(!ce(a)||!le(a,o))}},{key:"toggleShip",value:function(e){var t=this.ships[e],n=t.getCoordinates(t.startCoordinate,!t.orientation),r=me(this.ships,e);return!(!ce(n)||!le(n,r))&&(t.toggleOrientation(),!0)}},{key:"receiveAttack",value:function(e,t){var n,r,a=this,o=(n=this.ships,r={row:e,col:t},n.find((function(e){return e.getCoordinates().some((function(e){return e.row===r.row&&e.col===r.col}))})));return o?(o.hit(),o.isSunk()?(o.getCoordinates().forEach((function(e){!function(e,t,n){n[e][t]="SUNK",ue({row:e,col:t}).forEach((function(e){var t=e.row,r=e.col;ie(t,r)&&"SUNK"!==n[t][r]&&"HIT"!==n[t][r]&&(n[t][r]="MISS")}))}(e.row,e.col,a.board)})),"SUNK"):(this.board[e][t]="HIT","HIT")):(this.board[e][t]="MISS","MISS")}},{key:"gameover",value:function(){return this.ships.every((function(e){return e.isSunk()}))}}]),e}(),pe=function(){function e(){Object(te.a)(this,e),this.gameboard=new he}return Object(ne.a)(e,[{key:"attack",value:function(e,t,n){return n.gameboard.receiveAttack(e,t)}}]),e}(),ge=n(131),fe=n(127),de=n(67),be=function(e,t,n){return"MISS"!==n[e][t]&&"HIT"!==n[e][t]},ve=function(e){return 1===Se.length?function(e,t){var n=function(e){var t=e.row,n=e.col;return[{row:t-1,col:n},{row:t,col:n-1},{row:t,col:n+1},{row:t+1,col:n}]}(e[0]).filter((function(e){var n=e.row,r=e.col;return ie(n,r)&&be(n,r,t)})),r=n[oe(0,n.length-1)];return{row:r.row,col:r.col}}(Se,e.board):Se.length>=2?Se[0].col===Se[1].col?function(e,t){var n=e.sort((function(e,t){return e.row-t.row})),r=Object(de.a)({},n[0]),a=Object(de.a)({},n[n.length-1]);r.row-=1,a.row+=1;var o=[r,a].filter((function(e){var n=e.row,r=e.col;return ie(n,r)&&be(n,r,t)})),i=o[oe(0,o.length-1)];return{row:i.row,col:i.col}}(Se,e.board):function(e,t){var n=e.sort((function(e,t){return e.col-t.col})),r=Object(de.a)({},n[0]),a=Object(de.a)({},n[n.length-1]);r.col-=1,a.col+=1;var o=[r,a].filter((function(e){var n=e.row,r=e.col;return ie(n,r)&&be(n,r,t)})),i=o[oe(0,o.length-1)];return{row:i.row,col:i.col}}(Se,e.board):function(e){var t=e.board.reduce((function(t,n,r){var a=n.map((function(e,t){return{row:r,col:t}})).filter((function(t){return""===e.board[t.row][t.col]}));return[].concat(Object(re.a)(t),Object(re.a)(a))}),[]),n=t[oe(0,t.length-1)];return{row:n.row,col:n.col}}(e)},Se=[],we=function(e){Object(ge.a)(n,e);var t=Object(fe.a)(n);function n(){return Object(te.a)(this,n),t.apply(this,arguments)}return Object(ne.a)(n,[{key:"attack",value:function(e){var t=ve(e.gameboard),n=t.row,r=t.col,a=e.gameboard.receiveAttack(n,r);return"HIT"===a&&Se.unshift({row:n,col:r}),"SUNK"===a&&(Se=[]),a}}]),n}(pe);function Ee(){var e=Object(l.a)(["\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 60px;\n"]);return Ee=function(){return e},e}var ye,Oe,je=n(193),ke=b.a.div(Ee()),Ae=function(e,t,n){return!!ye.gameboard.canMoveShip(e,t,n)},Ce=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)([]),l=Object(c.a)(i,2),h=l[0],p=l[1],g=Object(r.useState)([]),f=Object(c.a)(g,2),d=f[0],b=f[1],v=Object(r.useState)([]),S=Object(c.a)(v,2),w=S[0],E=S[1],y=Object(r.useState)(!1),O=Object(c.a)(y,2),j=O[0],k=O[1],A=Object(r.useState)(!0),C=Object(c.a)(A,2),G=C[0],D=C[1],x=Object(r.useState)(!1),I=Object(c.a)(x,2),T=I[0],z=I[1],K=function(){(ye=new pe).gameboard.intialiseShips(),o(ye.gameboard.getGameboard()),p(ye.gameboard.getShips()),(Oe=new we).gameboard.intialiseShips(),E(Oe.gameboard.getGameboard()),b(Oe.gameboard.getShips()),k(!1),D(!0),z(!1)},U=function(e,t,n){ye.gameboard.moveShip(e,t,n)?p(je.cloneDeep(ye.gameboard.getShips())):u.b.warning("Ships need to be surrounded by empty cells")},H=function(e){return ye.gameboard.toggleShip(e)?(p(je.cloneDeep(ye.gameboard.getShips())),!0):(u.b.warning("Ships need to be surrounded by empty cells"),!1)},R=function e(){var t=Oe.attack(ye),n=je.cloneDeep(ye.gameboard.getGameboard());if(o(n),"MISS"!==t)return ye.gameboard.gameover()?z("computer"):e();D(!0)};return Object(r.useEffect)((function(){K()}),[]),a.a.createElement(s.a,null,a.a.createElement(ke,null,a.a.createElement(m.b,{direction:"vertical",size:"large",align:"center"},a.a.createElement(M,{startGame:j,playerTurn:G,winner:T,ships:d,toggleShip:H,moveShip:U,setStartGame:function(){k(!0)},randomiseShips:function(){ye.gameboard.randomiseShips();var e=je.cloneDeep(ye.gameboard.getShips());p(e)},playAgain:K}),a.a.createElement(L,{startGame:j,player:n,ships:h,moveShip:U,toggleShip:H,computer:w,attackComputer:function(e,t){var n=ye.attack(e,t,Oe),r=je.cloneDeep(Oe.gameboard.getGameboard()),a=je.cloneDeep(Oe.gameboard.getShips());if(k(!0),E(r),b(a),"HIT"===n||"SUNK"===n)return Oe.gameboard.gameover()?z("player"):void 0;D(!1),R()},winner:T}),a.a.createElement(ee,null))))},Ge=n(202),Me=n(125),De=(n(195),function(){return a.a.createElement(Ge.a,{backend:Me.a},a.a.createElement(Ce,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[133,1,2]]]);
//# sourceMappingURL=main.b4367c09.chunk.js.map