(this["webpackJsonpproject-battleship"]=this["webpackJsonpproject-battleship"]||[]).push([[0],{163:function(e,t,n){e.exports=n(299)},168:function(e,t,n){},298:function(e,t,n){},299:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),o=n.n(i),l=(n(168),n(53)),c=n(35),u=n(160),s=n(308),m=n(309),h=n(303),p=n(306),d=n(76),f=n(311),g=n(312),v=n(305),b=n(302),E=n(304),S=n(310),y=n(36);function k(){var e=Object(c.a)(["\n  position: ",";\n  cursor: pointer;\n  z-index: 100;\n  left: 0%;\n  top: 0%;\n  right: 0%;\n  bottom: 0%;\n  width: ",";\n  height: ",";\n  border: 1px solid hsla(224, 100%, 63.84%, 1);\n  background-color: ",";\n"]);return k=function(){return e},e}var j=y.a.div(k(),[function(e){return e.showcase?"relative":"absolute"}],(function(e){return e.orientation?.95*e.length*34+"px":"34px"}),(function(e){return e.orientation?"34px":.95*e.length*34+"px"}),(function(e){return!e.startGame&&e.isCurrentShip?"hsla(280, 100%, 66.74%, 0.60)":"hsla(228, 100%, 66.74%, 0.22)"})),O=function(e){return r.a.createElement(j,Object.assign({},e,{onClick:e.setCurrentShip}))},w=v.a.Option,C=h.a.Title,G=function(e){var t,n,a,i;return e.currentShip&&(t=e.currentShip.startCoordinate.col,n=e.currentShip.startCoordinate.row,a=e.currentShip.length,i=e.currentShip.orientation),r.a.createElement(b.a,null,r.a.createElement(m.b,{direction:"vertical"},r.a.createElement(C,{level:5},"Click on a ship to change the starting coordinate"),r.a.createElement(E.a,{layout:"inline"},r.a.createElement(E.a.Item,{label:"Ship"},r.a.createElement(O,{length:a,orientation:i,showcase:!0})),r.a.createElement(E.a.Item,{label:"Column"},r.a.createElement(v.a,{value:t,style:{width:60},onChange:function(t){return e.moveShip(n,t)}},r.a.createElement(w,{value:0},"A"),r.a.createElement(w,{value:1},"B"),r.a.createElement(w,{value:2},"C"),r.a.createElement(w,{value:3},"D"),r.a.createElement(w,{value:4},"E"),r.a.createElement(w,{value:5},"F"),r.a.createElement(w,{value:6},"G"),r.a.createElement(w,{value:7},"H"),r.a.createElement(w,{value:8},"I"),r.a.createElement(w,{value:9},"J"))),r.a.createElement(E.a.Item,{label:"Row"},r.a.createElement(v.a,{value:n,style:{width:60},onChange:function(n){return e.moveShip(n,t)}},r.a.createElement(w,{value:0},"1"),r.a.createElement(w,{value:1},"2"),r.a.createElement(w,{value:2},"3"),r.a.createElement(w,{value:3},"4"),r.a.createElement(w,{value:4},"5"),r.a.createElement(w,{value:5},"6"),r.a.createElement(w,{value:6},"7"),r.a.createElement(w,{value:7},"8"),r.a.createElement(w,{value:8},"9"),r.a.createElement(w,{value:9},"10"))),r.a.createElement(E.a.Item,{label:"Horizontal"},r.a.createElement(S.a,{checked:i,onChange:e.toggleShip})))))},x=h.a.Title,z=function(e){var t=r.a.createElement(m.b,null,r.a.createElement(p.a,{type:"primary",size:"large",onClick:e.setStartGame},"Play Game"),r.a.createElement(p.a,{type:"default",size:"large",onClick:e.randomiseShips},"Randomise Ships")),n=r.a.createElement(p.a,{type:"primary",size:"large",onClick:function(){return e.playAgain()}},"Restart"),a=r.a.createElement(m.b,null,r.a.createElement(f.a,{style:{fontSize:"1.6em",marginBottom:"6px"}}),r.a.createElement(x,{level:5},"You win!")),i=r.a.createElement(m.b,null,r.a.createElement(g.a,{style:{fontSize:"1.6em",marginBottom:"6px"}}),r.a.createElement(x,{level:5},"You lost"));return r.a.createElement(d.a,{justify:"center"},r.a.createElement(m.b,{direction:"vertical",size:"large",align:"center"},r.a.createElement(x,{level:1},"Battleship"),"player"===e.winner?a:null,"computer"===e.winner?i:null,e.startGame?n:t,e.startGame?null:r.a.createElement(G,{currentShip:e.currentShip,toggleShip:e.toggleShip,moveShip:e.moveShip})))};function I(){var e=Object(c.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 12px;\n"]);return I=function(){return e},e}function A(){var e=Object(c.a)(["\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-column: 2;\n"]);return A=function(){return e},e}function M(){var e=Object(c.a)(["\n  display: grid;\n  grid-template-rows: repeat(10, 1fr);\n  grid-column: 1;\n  grid-row: 2;\n"]);return M=function(){return e},e}function T(){var e=Object(c.a)(["\n  display: grid;\n  width: ","px;\n  grid-template: ","px 1fr / ","px 1fr;\n  opacity: ",";\n"]);return T=function(){return e},e}var B=y.a.div(T(),340,34,34,(function(e){return e.startGame?"100%":"50%"})),D=y.a.div(M()),q=y.a.div(A()),H=y.a.div(I()),J=function(e){return r.a.createElement(B,{startGame:e.startGame},r.a.createElement(q,null,r.a.createElement(H,null,"A"),r.a.createElement(H,null,"B"),r.a.createElement(H,null,"C"),r.a.createElement(H,null,"D"),r.a.createElement(H,null,"E"),r.a.createElement(H,null,"F"),r.a.createElement(H,null,"G"),r.a.createElement(H,null,"H"),r.a.createElement(H,null,"I"),r.a.createElement(H,null,"J")),r.a.createElement(D,null,r.a.createElement(H,null,"1"),r.a.createElement(H,null,"2"),r.a.createElement(H,null,"3"),r.a.createElement(H,null,"4"),r.a.createElement(H,null,"5"),r.a.createElement(H,null,"6"),r.a.createElement(H,null,"7"),r.a.createElement(H,null,"8"),r.a.createElement(H,null,"9"),r.a.createElement(H,null,"10")),e.children)};function F(){var e=Object(c.a)(["\n  margin-bottom: 0.6em;\n"]);return F=function(){return e},e}function K(){var e=Object(c.a)(["\n  font-size: ","px;\n  line-height: 0px;\n  color: indianred;\n  cursor: default;\n  background-color: ",";\n"]);return K=function(){return e},e}function P(){var e=Object(c.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: ","px;\n  width: ","px;\n  background-color: ",";\n  :hover {\n    border: ",";\n    background-color: ",";\n    cursor: ",";\n  }\n"]);return P=function(){return e},e}var R=y.a.div(P(),32,32,"black",(function(e){return e.startGame&&e.computer?"2px solid green;":null}),(function(e){return e.startGame&&e.computer?"rgba(51, 170, 51, 0.2)":null}),(function(e){return e.startGame&&e.computer?"pointer":null})),Y=Object(y.a)(R)(K(),34,(function(e){return e.sunk?"indianred":"rgb(211, 211, 211, 0.02)"})),N=y.a.div(F()),U=function(e){var t=r.a.createElement(R,{computer:e.computer,onClick:e.startGame?e.clicked:null,startGame:e.startGame},e.children);return"MISS"===e.hit&&(t=r.a.createElement(Y,null,r.a.createElement(N,null,".",e.children))),"HIT"===e.hit&&(t=r.a.createElement(Y,null,"X",e.children)),"SUNK"===e.hit&&(t=r.a.createElement(Y,{sunk:!0},e.children)),t},W=n(307);function X(){var e=Object(c.a)(["\n  position: relative;\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  grid-gap: 1px;\n  background-color: ",";\n  border: 1px solid ",";\n"]);return X=function(){return e},e}var $=y.a.div(X(),"#303030","#303030"),_=function(e){var t=e.gameboard.map((function(t,n){return t.map((function(t,a){var i,o,l=r.a.createElement(U,{hit:t,key:Object(W.a)(),computer:e.computer,startGame:e.startGame,clicked:e.computer?function(){return e.handleClick(n,a)}:null}),c=!1;return e.ships&&(c=e.ships.find((function(e){return e.startCoordinate.row===n&&e.startCoordinate.col===a})))&&(i=e.ships.findIndex((function(e){return e.startCoordinate.row===n&&e.startCoordinate.col===a})),o=r.a.createElement(U,{key:Object(W.a)(),hit:t,startGame:e.startGame},r.a.createElement(O,{orientation:c.orientation,length:c.length,coordinates:c.getCoordinates(),isCurrentShip:i===e.currentShipIndex,setCurrentShip:function(){return e.setCurrentShip(i)},startGame:e.startGame}))),c?o:l}))}));return r.a.createElement($,null,t)},L=function(e){return r.a.createElement(d.a,{justify:"center"},r.a.createElement(m.b,{size:50,align:"center"},r.a.createElement(J,{startGame:!0},r.a.createElement(_,{gameboard:e.player,ships:e.ships,currentShipIndex:e.currentShipIndex,setCurrentShip:e.setCurrentShip,startGame:e.startGame})),r.a.createElement(J,{startGame:e.startGame},r.a.createElement(_,{gameboard:e.computer,handleClick:e.attackComputer,computer:!0,startGame:e.startGame}))))},Q=h.a.Paragraph,V=s.a.Footer,Z=function(){return r.a.createElement(V,{style:{textAlign:"center"}},r.a.createElement(Q,null,"Created by"," ",r.a.createElement("a",{href:"https://github.com/timkellytk",target:"_blank",rel:"noopener noreferrer"},"Tim Kelly")," ","for The Odin Project"))},ee=n(56),te=n(57),ne=n(62),ae=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object(ee.a)(this,e),this.length=a,this.hitCount=0,this.startCoordinate={row:t,col:n},this.orientation=r}return Object(te.a)(e,[{key:"toggleOrientation",value:function(){this.orientation=!this.orientation}},{key:"getCoordinates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startCoordinate,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.orientation,n=e.row,a=e.col,r=Object(ne.a)(Array(this.length));return r.map((function(e,r){return t?{row:n,col:a+r}:{row:n+r,col:a}}))}},{key:"hit",value:function(){this.hitCount+=1}},{key:"isSunk",value:function(){return this.length===this.hitCount}}]),e}(),re=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},ie=function(e){return e.every((function(e){var t=e.row,n=e.col;return t>=0&&t<=9&&n>=0&&n<=9}))},oe=function(e,t){return e.every((function(e){return!t.some((function(t){return t.getCoordinates().some((function(t){return e.row===t.row&&e.col===t.col}))}))}))},le=function(e,t){return e.filter((function(e,n){return n!==t}))},ce=function(){function e(){Object(ee.a)(this,e),this.board=Object(ne.a)(Array(10)).map((function(e){return Object(ne.a)(Array(10)).map((function(e){return""}))})),this.ships=[]}return Object(te.a)(e,[{key:"getGameboard",value:function(){return this.board}},{key:"getShips",value:function(){return this.ships}},{key:"placeShip",value:function(e){var t=e.getCoordinates();return!(!ie(t)||!oe(t,this.ships))&&(this.ships.push(e),!0)}},{key:"intialiseShips",value:function(){var e=this;[{quantity:4,size:1},{quantity:3,size:2},{quantity:2,size:3},{quantity:1,size:4}].forEach((function(t){for(var n=t.quantity,a=t.size,r=0;r<n;){var i=new ae(re(0,9),re(0,9),a,Math.random()>=.5);e.placeShip(i)&&(r+=1)}}))}},{key:"randomiseShips",value:function(){this.ships=[],this.intialiseShips()}},{key:"moveShip",value:function(e,t,n){var a=this.ships[n],r={row:e,col:t},i=a.getCoordinates(r),o=le(this.ships,n);return!(!ie(i)||!oe(i,o))&&(a.startCoordinate=r,!0)}},{key:"toggleShip",value:function(e){var t=this.ships[e],n=t.getCoordinates(t.startCoordinate,!t.orientation),a=le(this.ships,e);return!(!ie(n)||!oe(n,a))&&(t.toggleOrientation(),!0)}},{key:"receiveAttack",value:function(e,t){var n,a,r=this,i=(n=this.ships,a={row:e,col:t},n.find((function(e){return e.getCoordinates().some((function(e){return e.row===a.row&&e.col===a.col}))})));return i?(i.hit(),i.isSunk()?i.getCoordinates().forEach((function(e){var t=e.row,n=e.col;r.board[t][n]="SUNK"})):this.board[e][t]="HIT",!0):(this.board[e][t]="MISS",!1)}},{key:"gameover",value:function(){return this.ships.every((function(e){return e.isSunk()}))}}]),e}(),ue=function(){function e(){Object(ee.a)(this,e),this.gameboard=new ce}return Object(te.a)(e,[{key:"attack",value:function(e,t,n){return n.gameboard.receiveAttack(e,t)}}]),e}(),se=n(161),me=n(157),he=function(e){Object(se.a)(n,e);var t=Object(me.a)(n);function n(){return Object(ee.a)(this,n),t.apply(this,arguments)}return Object(te.a)(n,[{key:"attack",value:function(e){var t=function(e){var t=e.board.reduce((function(t,n,a){var r=n.map((function(e,t){return{col:a,row:t}})).filter((function(t){return""===e.board[t.col][t.row]}));return[].concat(Object(ne.a)(t),Object(ne.a)(r))}),[]),n=t[re(0,t.length-1)];return{col:n.col,row:n.row}}(e.gameboard),n=t.col,a=t.row;return e.gameboard.receiveAttack(n,a)}}]),n}(ue);function pe(){var e=Object(c.a)(["\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 60px;\n"]);return pe=function(){return e},e}var de,fe,ge=n(297),ve=y.a.div(pe()),be=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)([]),c=Object(l.a)(o,2),h=c[0],p=c[1],d=Object(a.useState)(null),f=Object(l.a)(d,2),g=f[0],v=f[1],b=Object(a.useState)(null),E=Object(l.a)(b,2),S=E[0],y=E[1],k=Object(a.useState)([]),j=Object(l.a)(k,2),O=j[0],w=j[1],C=Object(a.useState)(!1),G=Object(l.a)(C,2),x=G[0],I=G[1],A=Object(a.useState)(!0),M=Object(l.a)(A,2),T=M[0],B=M[1],D=Object(a.useState)(!1),q=Object(l.a)(D,2),H=q[0],J=q[1],F=function(){(de=new ue).gameboard.intialiseShips(),i(de.gameboard.getGameboard()),p(de.gameboard.getShips()),v(de.gameboard.getShips()[0]),y(0),(fe=new he).gameboard.intialiseShips(),w(fe.gameboard.getGameboard()),I(!1),B(!0),J(!1)},K=function(e){var t=de.gameboard.getShips()[e];v(t),y(e)},P=function e(){var t=fe.attack(de),n=ge.cloneDeep(de.gameboard.getGameboard());if(i(n),t)return de.gameboard.gameover()?J("computer"):e();B(!0)};return Object(a.useEffect)((function(){F()}),[]),r.a.createElement(s.a,null,r.a.createElement(ve,null,r.a.createElement(m.b,{direction:"vertical",size:"large",align:"center"},r.a.createElement(z,{startGame:x,playerTurn:T,winner:H,currentShip:g,toggleShip:function(){return de.gameboard.toggleShip(S)?(p(ge.cloneDeep(de.gameboard.getShips())),K(S),!0):(u.b.warning("You need empty cells to update ship orientation"),!1)},moveShip:function(e,t){return de.gameboard.moveShip(e,t,S)?(p(ge.cloneDeep(de.gameboard.getShips())),K(S),!0):(u.b.warning("There is already a ship in this location"),!1)},setStartGame:function(){I(!0)},randomiseShips:function(){de.gameboard.randomiseShips();var e=ge.cloneDeep(de.gameboard.getShips());p(e),v(de.gameboard.getShips()[0]),y(0)},playAgain:F}),r.a.createElement(L,{startGame:x,player:n,ships:h,currentShipIndex:S,computer:O,setCurrentShip:K,attackComputer:function(e,t){var n=de.attack(e,t,fe),a=ge.cloneDeep(fe.gameboard.getGameboard());if(w(a),!n){if(fe.gameboard.gameover())return J("player");B(!1),P()}}}),r.a.createElement(Z,null))))},Ee=(n(298),function(){return r.a.createElement(be,null)});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[163,1,2]]]);
//# sourceMappingURL=main.58e4addb.chunk.js.map