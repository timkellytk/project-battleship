(this["webpackJsonpproject-battleship"]=this["webpackJsonpproject-battleship"]||[]).push([[0],{100:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAC20lEQVRoge2XX0hTURzHv2etLScaSJvrJdIiSQtMRmUpgRBSLwpBRT2IpAyKSNAkCIwIH4qKRVEGPpuIgyTMl/7aFqWWq9sfTaiHhFpLJTXXdds9PUiwe3f/7brZhvfzds73d+75/jjnd865gI6Ojo7OcoZICXcfeb0AdkkM8lRV7C5Pmqs4MMhoouYBgAJlSfCiCbkEAADNTY1obmoU9NKOJPmJG8UExKiuKDuaaCNaMSoFXLp8RVanbaC8jsf5/IAba/ntD0O8JtnDStahGjStQCqhsQZSh7RfgUXXADab+e0Dgj3v9vLbwhrBZyULssQU0N4jdVQsMJpDU76Sur6hYQCgT838+EIHP1ghgfZZq6Nr9VZ+ZUtQyPoD19z3bNF9mraQ35zdqmWcGD+MFlXfMlIOhX/8tTH9Wib1ZKzf11pdcT+XnT4LMFo+gQmY8YDY4bHkVaqJd7Djb5y9A73Cfk1baKnJ5FhaFWIKat2+MaGmaQWWmp3Br+7anljzgEgCPfbZdTCaToRtm05Fsm2rkm9PnhUzATZr1F9zRkKXvMZ/HavMMeQXj4StG6xJ8qYK08iTlsyrHRekdNl3CN2BbJjwHEBRwp2pgaCP9GO/XIjsMUpeYhoUNQC4hBpTRxgRnFYKUrwHiAevANxJiKX4uEW8eK8UpO4iI7gIYCmP1ymYcF5NoKoESD8YAC8WZSk+zpGHmFATKJuAa3De6RqcdwIAKDqFOlNaD6a0XnK8Rv0j5tAWM78EMafQ7SFq+U1DWwwcbQDB4X/mN77t7q7srHcDwE97EXzlJzG67SAAoGC4C8XPrmPN94Utuxg9aLFVt7d8+iacnzMQVyZZ+c7pIHOyCbgG2JR7SkTTsN3M85z2PzSyCTCBCJhAJGV1QOQtFOKAySCH134OY5ML99f4DEVJrgE5GQv5/m89mpgayLs5k9I18OV41jKqgXQg7RPQ0dHR0dFJa/4CSikt5gwrqsUAAAAASUVORK5CYII="},133:function(e,t,n){e.exports=n(196)},138:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(8),i=n.n(o),c=(n(138),n(36)),l=n(23),u=n(130),s=n(209),m=n(210),h=n(203),p=n(24),g=n(100),f=n.n(g),d=n(206),b=n(201),v="SHIP";function w(){var e=Object(l.a)(["\n  position: ",";\n  cursor: pointer;\n  z-index: 100;\n  left: 0%;\n  top: 0%;\n  right: 0%;\n  bottom: 0%;\n  width: ",";\n  height: ",";\n  border: 1px solid hsla(224, 100%, 63.84%, 1);\n  background-color: ",";\n"]);return w=function(){return e},e}var E=p.a.div(w(),[function(e){return e.showcase?"relative":"absolute"}],(function(e){return e.orientation?.95*e.length*34+"px":"34px"}),(function(e){return e.orientation?"34px":.95*e.length*34+"px"}),(function(e){return e.sunk?"#db4c3f":"hsla(228, 100%, 66.74%, 0.22)"})),S=function(e){var t=Object(d.a)({item:{type:v,index:e.shipIndex},collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(c.a)(t,3),r=n[0].isDragging,o=n[1],i=n[2];return a.a.createElement(a.a.Fragment,null,a.a.createElement(b.a,{connect:i,src:f.a}),a.a.createElement(E,{ref:o,length:e.length,orientation:e.orientation,showcase:e.showcase,sunk:e.sunk,isDragging:r,onClick:e.toggleShip}))},y=h.a.Title,k=function(e){var t=e.ships.map((function(e,t){return a.a.createElement(S,{key:t,length:e.length,sunk:e.isSunk(),orientation:!1,showcase:!0})}));return a.a.createElement("div",null,a.a.createElement(y,{level:5},"Enemy Ships"),a.a.createElement(m.b,null,t))},O=n(204),j=n(207),A=n(211),C=n(212),G=h.a.Title,x=h.a.Paragraph,D=function(e){var t=a.a.createElement(m.b,null,a.a.createElement(O.a,{type:"primary",size:"large",onClick:e.setStartGame},"Play Game"),a.a.createElement(O.a,{type:"ghost",size:"large",onClick:e.randomiseShips},"Randomise Ships")),n=a.a.createElement(O.a,{type:"primary",size:"large",onClick:function(){return e.playAgain()}},"Restart"),r=a.a.createElement(m.b,null,a.a.createElement(A.a,{style:{fontSize:"1.6em",marginBottom:"6px"}}),a.a.createElement(G,{level:5},"You win!")),o=a.a.createElement(m.b,null,a.a.createElement(C.a,{style:{fontSize:"1.6em",marginBottom:"6px"}}),a.a.createElement(G,{level:5},"You lost")),i=a.a.createElement(a.a.Fragment,null,a.a.createElement(x,{style:{width:"350px",textAlign:"center"}},"Drag and drop your ships to move their location. Click ships to toggle vertical or horizontal direction. Sink all of the enemy battleships to win the game."));return a.a.createElement(j.a,{justify:"center"},a.a.createElement(m.b,{direction:"vertical",size:"large",align:"center"},a.a.createElement(G,{level:1},"Battleship"),"player"===e.winner?r:null,"computer"===e.winner?o:null,e.startGame?a.a.createElement(k,{ships:e.ships}):i,e.startGame?n:t))};function I(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 12px;\n"]);return I=function(){return e},e}function M(){var e=Object(l.a)(["\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-column: 2;\n"]);return M=function(){return e},e}function T(){var e=Object(l.a)(["\n  display: grid;\n  grid-template-rows: repeat(10, 1fr);\n  grid-column: 1;\n  grid-row: 2;\n"]);return T=function(){return e},e}function z(){var e=Object(l.a)(["\n  display: grid;\n  width: ","px;\n  grid-template: ","px 1fr / ","px 1fr;\n  opacity: ",";\n"]);return z=function(){return e},e}var K=p.a.div(z(),340,34,34,(function(e){return e.startGame?"100%":"50%"})),U=p.a.div(T()),H=p.a.div(M()),R=p.a.div(I()),J=function(e){return a.a.createElement(K,{startGame:e.startGame},a.a.createElement(H,null,a.a.createElement(R,null,"A"),a.a.createElement(R,null,"B"),a.a.createElement(R,null,"C"),a.a.createElement(R,null,"D"),a.a.createElement(R,null,"E"),a.a.createElement(R,null,"F"),a.a.createElement(R,null,"G"),a.a.createElement(R,null,"H"),a.a.createElement(R,null,"I"),a.a.createElement(R,null,"J")),a.a.createElement(U,null,a.a.createElement(R,null,"1"),a.a.createElement(R,null,"2"),a.a.createElement(R,null,"3"),a.a.createElement(R,null,"4"),a.a.createElement(R,null,"5"),a.a.createElement(R,null,"6"),a.a.createElement(R,null,"7"),a.a.createElement(R,null,"8"),a.a.createElement(R,null,"9"),a.a.createElement(R,null,"10")),e.children)},N=n(208);function F(){var e=Object(l.a)(["\n  margin-bottom: 0.6em;\n"]);return F=function(){return e},e}function Q(){var e=Object(l.a)(["\n  font-size: ","px;\n  line-height: 0px;\n  color: indianred;\n  cursor: default;\n  background-color: ",";\n"]);return Q=function(){return e},e}function X(){var e=Object(l.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: ","px;\n  width: ","px;\n  background-color: ",";\n  :hover {\n    border: ",";\n    background-color: ",";\n    cursor: ",";\n  }\n"]);return X=function(){return e},e}var q=p.a.div(X(),32,32,(function(e){return e.canDrop&&e.isOver&&!e.computer?"rgba(340, 100, 51, 0.6)":e.canDrop&&!e.computer?"rgba(51, 170, 51, 0.2)":"black"}),(function(e){return e.startGame&&e.computer?"2px solid green;":null}),(function(e){return e.startGame&&e.computer?"rgba(51, 170, 51, 0.2)":null}),(function(e){return e.startGame&&e.computer?"pointer":null})),P=Object(p.a)(q)(Q(),34,(function(e){return e.sunk?"indianred":"rgb(211, 211, 211, 0.02)"})),B=p.a.div(F()),Y=function(e){var t=Object(N.a)({accept:v,canDrop:function(t){return!e.startGame&&Ge(e.row,e.col,t.index)},drop:function(t){return e.moveShip(e.row,e.col,t.index)},collect:function(e){return{isOver:!!e.isOver(),canDrop:!!e.canDrop()}}}),n=Object(c.a)(t,2),r=n[0],o=r.isOver,i=r.canDrop,l=n[1],u=a.a.createElement(q,{ref:l,canDrop:i,isOver:o,computer:e.computer,onClick:e.clicked,startGame:e.startGame},e.children);return"MISS"===e.hit&&(u=a.a.createElement(P,null,a.a.createElement(B,null,".",e.children))),"HIT"===e.hit&&(u=a.a.createElement(P,null,"X",e.children)),"SUNK"===e.hit&&(u=a.a.createElement(P,{sunk:!0},e.children)),u},Z=n(205);function V(){var e=Object(l.a)(["\n  position: relative;\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  grid-gap: 1px;\n  background-color: ",";\n  border: 1px solid ",";\n"]);return V=function(){return e},e}var W=p.a.div(V(),"#303030","#303030"),L=function(e){var t=e.gameboard.map((function(t,n){return t.map((function(t,r){var o,i,c=a.a.createElement(Y,{row:n,col:r,hit:t,key:Object(Z.a)(),computer:e.computer,startGame:e.startGame,moveShip:e.moveShip,clicked:function(){return e.computer&&!1===e.winner?e.handleClick(n,r):null}}),l=!1;return e.ships&&(l=e.ships.find((function(e){return e.startCoordinate.row===n&&e.startCoordinate.col===r})))&&(o=e.ships.findIndex((function(e){return e.startCoordinate.row===n&&e.startCoordinate.col===r})),i=a.a.createElement(Y,{key:Object(Z.a)(),row:n,col:r,moveShip:e.moveShip,hit:t,startGame:e.startGame},a.a.createElement(S,{orientation:l.orientation,length:l.length,shipIndex:o,toggleShip:function(){return e.toggleShip(o)},startGame:e.startGame}))),l?i:c}))}));return a.a.createElement(W,null,t)},$=function(e){return a.a.createElement(j.a,{justify:"center"},a.a.createElement(m.b,{size:50,align:"center"},a.a.createElement(J,{startGame:!0},a.a.createElement(L,{startGame:e.startGame,gameboard:e.player,ships:e.ships,moveShip:e.moveShip,toggleShip:e.toggleShip})),a.a.createElement(J,{startGame:e.startGame},a.a.createElement(L,{startGame:e.startGame,gameboard:e.computer,handleClick:e.attackComputer,winner:e.winner,computer:!0}))))},_=h.a.Paragraph,ee=s.a.Footer,te=function(){return a.a.createElement(ee,{style:{textAlign:"center"}},a.a.createElement(_,null,"Created by"," ",a.a.createElement("a",{href:"https://github.com/timkellytk",target:"_blank",rel:"noopener noreferrer"},"Tim Kelly")," ","for The Odin Project"))},ne=n(43),re=n(44),ae=n(46),oe=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object(ne.a)(this,e),this.length=r,this.hitCount=0,this.startCoordinate={row:t,col:n},this.orientation=a}return Object(re.a)(e,[{key:"toggleOrientation",value:function(){this.orientation=!this.orientation}},{key:"getCoordinates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startCoordinate,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.orientation,n=e.row,r=e.col,a=Object(ae.a)(Array(this.length));return a.map((function(e,a){return t?{row:n,col:r+a}:{row:n+a,col:r}}))}},{key:"hit",value:function(){this.hitCount+=1}},{key:"isSunk",value:function(){return this.length===this.hitCount}}]),e}(),ie=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},ce=function(e,t){return e>=0&&e<=9&&t>=0&&t<=9},le=function(e){return e.every((function(e){var t=e.row,n=e.col;return t>=0&&t<=9&&n>=0&&n<=9}))},ue=function(e,t){return e.every((function(e){return!t.some((function(t){return t.getCoordinates().some((function(t){return me(e,t)}))}))}))},se=function(e){var t=e.row,n=e.col;return[{row:t-1,col:n-1},{row:t-1,col:n},{row:t-1,col:n+1},{row:t,col:n-1},{row:t,col:n},{row:t,col:n+1},{row:t+1,col:n-1},{row:t+1,col:n},{row:t+1,col:n+1}]},me=function(e,t){return se(e).some((function(e){var n=e.row,r=e.col;return n===t.row&&r===t.col}))},he=function(e,t){return e.filter((function(e,n){return n!==t}))},pe=function(){function e(){Object(ne.a)(this,e),this.board=Object(ae.a)(Array(10)).map((function(e){return Object(ae.a)(Array(10)).map((function(e){return""}))})),this.ships=[]}return Object(re.a)(e,[{key:"getGameboard",value:function(){return this.board}},{key:"getShips",value:function(){return this.ships}},{key:"placeShip",value:function(e){var t=e.getCoordinates();return!(!le(t)||!ue(t,this.ships))&&(this.ships.push(e),!0)}},{key:"intialiseShips",value:function(){var e=this;[{quantity:4,size:1},{quantity:3,size:2},{quantity:2,size:3},{quantity:1,size:4}].forEach((function(t){for(var n=t.quantity,r=t.size,a=0;a<n;){var o=new oe(ie(0,9),ie(0,9),r,Math.random()>=.5);e.placeShip(o)&&(a+=1)}}))}},{key:"randomiseShips",value:function(){this.ships=[],this.intialiseShips()}},{key:"moveShip",value:function(e,t,n){return!!this.canMoveShip(e,t,n)&&(this.ships[n].startCoordinate={row:e,col:t},!0)}},{key:"canMoveShip",value:function(e,t,n){var r={row:e,col:t},a=this.ships[n].getCoordinates(r),o=he(this.ships,n);return!(!le(a)||!ue(a,o))}},{key:"toggleShip",value:function(e){var t=this.ships[e],n=t.getCoordinates(t.startCoordinate,!t.orientation),r=he(this.ships,e);return!(!le(n)||!ue(n,r))&&(t.toggleOrientation(),!0)}},{key:"receiveAttack",value:function(e,t){var n,r,a=this,o=(n=this.ships,r={row:e,col:t},n.find((function(e){return e.getCoordinates().some((function(e){return e.row===r.row&&e.col===r.col}))})));return o?(o.hit(),o.isSunk()?(o.getCoordinates().forEach((function(e){!function(e,t,n){n[e][t]="SUNK",se({row:e,col:t}).forEach((function(e){var t=e.row,r=e.col;ce(t,r)&&"SUNK"!==n[t][r]&&"HIT"!==n[t][r]&&(n[t][r]="MISS")}))}(e.row,e.col,a.board)})),"SUNK"):(this.board[e][t]="HIT","HIT")):(this.board[e][t]="MISS","MISS")}},{key:"gameover",value:function(){return this.ships.every((function(e){return e.isSunk()}))}}]),e}(),ge=function(){function e(){Object(ne.a)(this,e),this.gameboard=new pe}return Object(re.a)(e,[{key:"attack",value:function(e,t,n){return n.gameboard.receiveAttack(e,t)}}]),e}(),fe=n(131),de=n(127),be=n(67),ve=function(e){var t=e[ie(0,e.length-1)];return{row:t.row,col:t.col}},we=function(e,t,n){return"MISS"!==n[e][t]&&"HIT"!==n[e][t]},Ee=function(e){return 1===Se.length?function(e,t){var n=function(e){var t=e.row,n=e.col;return[{row:t-1,col:n},{row:t,col:n-1},{row:t,col:n+1},{row:t+1,col:n}]}(e[0]).filter((function(e){var n=e.row,r=e.col;return ce(n,r)&&we(n,r,t)}));return ve(n)}(Se,e.board):Se.length>=2?Se[0].col===Se[1].col?function(e,t){var n=e.sort((function(e,t){return e.row-t.row})),r=Object(be.a)({},n[0]),a=Object(be.a)({},n[n.length-1]);r.row-=1,a.row+=1;var o=[r,a].filter((function(e){var n=e.row,r=e.col;return ce(n,r)&&we(n,r,t)}));return ve(o)}(Se,e.board):function(e,t){var n=e.sort((function(e,t){return e.col-t.col})),r=Object(be.a)({},n[0]),a=Object(be.a)({},n[n.length-1]);r.col-=1,a.col+=1;var o=[r,a].filter((function(e){var n=e.row,r=e.col;return ce(n,r)&&we(n,r,t)}));return ve(o)}(Se,e.board):function(e){var t=e.board.reduce((function(t,n,r){var a=n.map((function(e,t){return{row:r,col:t}})).filter((function(t){return""===e.board[t.row][t.col]}));return[].concat(Object(ae.a)(t),Object(ae.a)(a))}),[]);return ve(t)}(e)},Se=[],ye=function(e){Object(fe.a)(n,e);var t=Object(de.a)(n);function n(){return Object(ne.a)(this,n),t.apply(this,arguments)}return Object(re.a)(n,[{key:"attack",value:function(e){var t=Ee(e.gameboard),n=t.row,r=t.col,a=e.gameboard.receiveAttack(n,r);return"HIT"===a&&Se.push({row:n,col:r}),"SUNK"===a&&(Se=[]),a}}]),n}(ge);function ke(){var e=Object(l.a)(["\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 60px;\n"]);return ke=function(){return e},e}var Oe,je,Ae=n(193),Ce=p.a.div(ke()),Ge=function(e,t,n){return!!Oe.gameboard.canMoveShip(e,t,n)},xe=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)([]),l=Object(c.a)(i,2),h=l[0],p=l[1],g=Object(r.useState)([]),f=Object(c.a)(g,2),d=f[0],b=f[1],v=Object(r.useState)([]),w=Object(c.a)(v,2),E=w[0],S=w[1],y=Object(r.useState)(!1),k=Object(c.a)(y,2),O=k[0],j=k[1],A=Object(r.useState)(!1),C=Object(c.a)(A,2),G=C[0],x=C[1],I=function(){(Oe=new ge).gameboard.intialiseShips(),o(Oe.gameboard.getGameboard()),p(Oe.gameboard.getShips()),(je=new ye).gameboard.intialiseShips(),S(je.gameboard.getGameboard()),b(je.gameboard.getShips()),j(!1),x(!1)},M=function e(){var t=je.attack(Oe),n=Ae.cloneDeep(Oe.gameboard.getGameboard());if(o(n),"HIT"===t||"SUNK"===t)return Oe.gameboard.gameover()?x("computer"):e()};return Object(r.useEffect)((function(){I()}),[]),a.a.createElement(s.a,null,a.a.createElement(Ce,null,a.a.createElement(m.b,{direction:"vertical",size:"large",align:"center"},a.a.createElement(D,{startGame:O,winner:G,ships:d,setStartGame:function(){j(!0)},randomiseShips:function(){Oe.gameboard.randomiseShips();var e=Ae.cloneDeep(Oe.gameboard.getShips());p(e)},playAgain:I}),a.a.createElement($,{startGame:O,winner:G,player:n,ships:h,computer:E,moveShip:function(e,t,n){Oe.gameboard.moveShip(e,t,n)&&p(Ae.cloneDeep(Oe.gameboard.getShips()))},toggleShip:function(e){return Oe.gameboard.toggleShip(e)?(p(Ae.cloneDeep(Oe.gameboard.getShips())),!0):(u.b.warning("You need empty cells to update the ship's direction"),!1)},attackComputer:function(e,t){var n=Oe.attack(e,t,je),r=Ae.cloneDeep(je.gameboard.getGameboard()),a=Ae.cloneDeep(je.gameboard.getShips());if(j(!0),S(r),b(a),"HIT"===n||"SUNK"===n)return je.gameboard.gameover()?x("player"):void 0;M()}}),a.a.createElement(te,null))))},De=n(202),Ie=n(125),Me=(n(195),function(){return a.a.createElement(De.a,{backend:Ie.a},a.a.createElement(xe,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[133,1,2]]]);
//# sourceMappingURL=main.331b3349.chunk.js.map